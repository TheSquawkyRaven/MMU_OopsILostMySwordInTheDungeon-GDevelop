{
  "associatedLayout": "Game Scene",
  "lastChangeTimeStamp": 0,
  "name": "Turn Based Tick",
  "events": [
    {
      "disabled": false,
      "folded": false,
      "type": "BuiltinCommonInstructions::Comment",
      "color": {
        "b": 109,
        "g": 230,
        "r": 255,
        "textB": 0,
        "textG": 0,
        "textR": 0
      },
      "comment": "Projectile Move TODO",
      "comment2": ""
    },
    {
      "disabled": false,
      "folded": false,
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [],
      "actions": [],
      "events": []
    },
    {
      "disabled": false,
      "folded": false,
      "type": "BuiltinCommonInstructions::Comment",
      "color": {
        "b": 109,
        "g": 230,
        "r": 255,
        "textB": 0,
        "textG": 0,
        "textR": 0
      },
      "comment": "Enemy Attack",
      "comment2": ""
    },
    {
      "disabled": false,
      "folded": false,
      "type": "BuiltinCommonInstructions::ForEach",
      "object": "Enemies",
      "conditions": [
        {
          "type": {
            "inverted": false,
            "value": "VarObjet"
          },
          "parameters": [
            "Enemies",
            "State",
            "=",
            "2"
          ],
          "subInstructions": []
        }
      ],
      "actions": [],
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        }
      ]
    },
    {
      "disabled": false,
      "folded": false,
      "type": "BuiltinCommonInstructions::Comment",
      "color": {
        "b": 109,
        "g": 230,
        "r": 255,
        "textB": 0,
        "textG": 0,
        "textR": 0
      },
      "comment": "Enemy Chase",
      "comment2": ""
    },
    {
      "disabled": false,
      "folded": false,
      "type": "BuiltinCommonInstructions::ForEach",
      "object": "Enemies",
      "conditions": [
        {
          "type": {
            "inverted": false,
            "value": "VarObjet"
          },
          "parameters": [
            "Enemies",
            "State",
            "=",
            "1"
          ],
          "subInstructions": []
        }
      ],
      "actions": [],
      "events": [
        {
          "disabled": true,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "Position::FollowPlayerPathfind"
              },
              "parameters": [
                "",
                "Enemies.Variable(Pos.x)",
                "Enemies.Variable(Pos.y)",
                "Player.Variable(Pos.x)",
                "Player.Variable(Pos.y)",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Tween::AddObjectPositionTween"
                  },
                  "parameters": [
                    "Enemies",
                    "Tween",
                    "\"Move\"",
                    "Variable(x) * Variable(tileSize)",
                    "Variable(y) * Variable(tileSize)",
                    "\"linear\"",
                    "250",
                    ""
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "Map[Enemies.Variable(Pos.x)][Enemies.Variable(Pos.y)].c",
                    "=",
                    "0"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "ModVarObjet"
                  },
                  "parameters": [
                    "Enemies",
                    "Pos.x",
                    "=",
                    "Variable(x)"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "ModVarObjet"
                  },
                  "parameters": [
                    "Enemies",
                    "Pos.y",
                    "=",
                    "Variable(y)"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "ModVarScene"
                  },
                  "parameters": [
                    "Map[Enemies.Variable(Pos.x)][Enemies.Variable(Pos.y)].c",
                    "=",
                    "1"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ]
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "Tween::AddObjectPositionTween"
              },
              "parameters": [
                "Enemies",
                "Tween",
                "\"Move\"",
                "(Enemies.Variable(Pos.x) + Enemies.Variable(Movement.x)) * Variable(tileSize)",
                "(Enemies.Variable(Pos.y) + Enemies.Variable(Movement.y)) * Variable(tileSize)",
                "\"linear\"",
                "250",
                ""
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarScene"
              },
              "parameters": [
                "Map[Enemies.Variable(Pos.x)][Enemies.Variable(Pos.y)].c",
                "=",
                "0"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "Position::RemoveOccupiedTile"
              },
              "parameters": [
                "",
                "Enemies.Variable(Pos.x)",
                "Enemies.Variable(Pos.y)",
                "OccupiedTile",
                ""
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Enemies",
                "Pos.x",
                "=",
                "Enemies.Variable(Pos.x) + Enemies.Variable(Movement.x)"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Enemies",
                "Pos.y",
                "=",
                "Enemies.Variable(Pos.y) + Enemies.Variable(Movement.y)"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarScene"
              },
              "parameters": [
                "Map[Enemies.Variable(Pos.x)][Enemies.Variable(Pos.y)].c",
                "=",
                "1"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "Position::CreateOccupiedTile"
              },
              "parameters": [
                "",
                "Enemies.Variable(Pos.x)",
                "Enemies.Variable(Pos.y)",
                "OccupiedTile",
                ""
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Enemies",
                "Movement.x",
                "=",
                "0"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Enemies",
                "Movement.y",
                "=",
                "0"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Prepare for next movement, refer to \"Running Behaviours\"",
          "comment2": ""
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "LinkedObjects::PickObjectsLinkedTo"
              },
              "parameters": [
                "",
                "Pathfinder",
                "Enemies",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "MettreXY"
              },
              "parameters": [
                "Pathfinder",
                "=",
                "Enemies.Variable(Pos.x) * Variable(tileSize)",
                "=",
                "Enemies.Variable(Pos.y) * Variable(tileSize)"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "PathfindingBehavior::SetDestination"
              },
              "parameters": [
                "Pathfinder",
                "Pathfinding",
                "",
                "Player.Variable(Pos.x) * Variable(tileSize)",
                "Player.Variable(Pos.y) * Variable(tileSize)"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "SetObjectVariableAsBoolean"
              },
              "parameters": [
                "Pathfinder",
                "Moved",
                ""
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Pathfinder",
                "Movement.x",
                "=",
                "0"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Pathfinder",
                "Movement.y",
                "=",
                "0"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Pathfinder",
                "LastPos.x",
                "=",
                "Pathfinder.X()"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Pathfinder",
                "LastPos.y",
                "=",
                "Pathfinder.Y()"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ]
    },
    {
      "disabled": false,
      "folded": false,
      "type": "BuiltinCommonInstructions::Comment",
      "color": {
        "b": 109,
        "g": 230,
        "r": 255,
        "textB": 0,
        "textG": 0,
        "textR": 0
      },
      "comment": "Enemy Idle",
      "comment2": ""
    },
    {
      "disabled": false,
      "folded": false,
      "type": "BuiltinCommonInstructions::ForEach",
      "object": "Enemies",
      "conditions": [
        {
          "type": {
            "inverted": false,
            "value": "VarObjet"
          },
          "parameters": [
            "Enemies",
            "State",
            "=",
            "0"
          ],
          "subInstructions": []
        }
      ],
      "actions": [],
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Test Detection",
          "comment2": ""
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "ModVarScene"
              },
              "parameters": [
                "distance",
                "=",
                "DistanceBetweenPositions(Enemies.Variable(Pos.x), Enemies.Variable(Pos.y), Player.Variable(Pos.x), Player.Variable(Pos.y))"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarScene"
              },
              "parameters": [
                "distance",
                "<=",
                "Enemies.Variable(DetectionRadius)"
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "Create"
              },
              "parameters": [
                "",
                "DetectedMarker",
                "Enemies.X()",
                "Enemies.Y()",
                "\"\""
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "Tween::AddObjectPositionYTween"
              },
              "parameters": [
                "DetectedMarker",
                "Tween",
                "\"\"",
                "DetectedMarker.Y() - 8",
                "\"easeInOutQuad\"",
                "1000",
                "yes"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Enemies",
                "State",
                "=",
                "1"
              ],
              "subInstructions": []
            }
          ],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Create"
                  },
                  "parameters": [
                    "",
                    "Pathfinder",
                    "Enemies.X()",
                    "Enemies.Y()",
                    "\"Characters\""
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "LinkedObjects::LinkObjects"
                  },
                  "parameters": [
                    "",
                    "Pathfinder",
                    "Enemies"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "ModVarObjet"
                  },
                  "parameters": [
                    "Pathfinder",
                    "LastPos.x",
                    "=",
                    "Pathfinder.X()"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "ModVarObjet"
                  },
                  "parameters": [
                    "Pathfinder",
                    "LastPos.y",
                    "=",
                    "Pathfinder.Y()"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "PathfindingBehavior::SetDestination"
                  },
                  "parameters": [
                    "Pathfinder",
                    "Pathfinding",
                    "",
                    "Player.Variable(Pos.x) * Variable(tileSize)",
                    "Player.Variable(Pos.y) * Variable(tileSize)"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "GlobalVariableAsBoolean"
                  },
                  "parameters": [
                    "Debug",
                    "False"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Cache"
                  },
                  "parameters": [
                    "Pathfinder"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ]
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Idle, Look Around",
          "comment2": ""
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Enemies",
                "idleTime",
                "-",
                "1"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarObjet"
              },
              "parameters": [
                "Enemies",
                "idleTime",
                "<=",
                "0"
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "ModVarObjet"
              },
              "parameters": [
                "Enemies",
                "idleTime",
                "=",
                "RandomInRange(2, 4)"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "SetSceneVariableAsBoolean"
              },
              "parameters": [
                "ifelse",
                "False"
              ],
              "subInstructions": []
            }
          ],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "FlippedX"
                  },
                  "parameters": [
                    "Enemies"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "SceneVariableAsBoolean"
                  },
                  "parameters": [
                    "ifelse",
                    "False"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetSceneVariableAsBoolean"
                  },
                  "parameters": [
                    "ifelse",
                    "True"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "FlipX"
                  },
                  "parameters": [
                    "Enemies",
                    "no"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "FlippedX"
                  },
                  "parameters": [
                    "Enemies"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "SceneVariableAsBoolean"
                  },
                  "parameters": [
                    "ifelse",
                    "False"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetSceneVariableAsBoolean"
                  },
                  "parameters": [
                    "ifelse",
                    "True"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "FlipX"
                  },
                  "parameters": [
                    "Enemies",
                    "yes"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ]
        }
      ]
    }
  ]
}